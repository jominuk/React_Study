## Memoization

- ì»´í“¨í„° í”„ë¡œê·¸ë¨ì´ ë™ì¼í•œ ê³„ì‚°ì„ ë°˜ë³µí•  ë•Œ, ì´ì „ì— ê³„ì‚°í•œ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•¨ìœ¼ë¡œì¨<br>
  ë™ì¼í•œ ê³„ì‚°ì˜ ë°˜ë³µ ìˆ˜í–‰ì„ ì œê±°í•˜ì—¬ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì†ë„ë¥¼ ë¹ ë¥´ê²Œ í•˜ëŠ”ê¸°ìˆ 

### React.memo

- ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§(Rendering) í•œ ë’¤, ì´ì „ ë Œë”ë§ ê²°ê³¼ì— ë¹„êµí•˜ì—¬ DOM ì—…ë°ì´íŠ¸ë¥¼ ê²°ì •

```javascript
const PostListCard = React.memo(({ posts }) => {
  return (
    <StCardWrapper to={`/${posts.postId}`}>
      <StImageCarrier alt="" src={posts?.postImage}></StImageCarrier>

      <StCommunityBox>
        <StTitleCarrier>{posts?.title}</StTitleCarrier>

        <StContentCarrier>
          <pre> {posts?.content} </pre>
        </StContentCarrier>
      </StCommunityBox>
      <StBox>
        <StName>
          <StNickName> {posts?.email} </StNickName>
          <div>{new Date(posts.createdAt).toLocaleDateString("ko-KR")}</div>
        </StName>
        <div> {posts.commentsCount}ê°œì˜ ëŒ“ê¸€ </div>
      </StBox>
    </StCardWrapper>
  );
});

export default PostListCard;
```

ğŸ’¥ í•˜ì§€ë§Œ ë„ˆë¬´ ë‚¨ë°œí•˜ì—¬ ì‚¬ìš©í•  ê²½ìš° ê³„ì† ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¹„êµí•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ì €í•˜ ë  ìš°ë ¤ê°€ ìˆìŒ ğŸ’¥

### useMemo

- íŠ¹ì • ê²°ê³¼ê°’ì„ ì¬ì‚¬ìš© í•  ë•Œ ì‚¬ìš©
- í¼í¬ë¨¼ìŠ¤ë¥¼ ìµœì í™” í•˜ê¸° ìœ„í•œ í›…
- ìì²´ì ìœ¼ë¡œ props ê°’ì„ ë¹„êµí•´ì„œ ìˆ˜ì •ëœ ë¶€ë¶„ì´ ì—†ë‹¤ë©´ ë¦¬ì•¡íŠ¸ DOMì—ì„œ ë¹„êµ ì‘ì—…ì´ ë“¤ì–´ê°€ì§€ ì•ŠìŒ

```javascript
const renderItem = useMemo(() => {
  return (
    <>
      {data?.map((el, index) => {
        return (
          <StReviewWrap key={`map-list-${index}`}>
            <span className="reviewAddress">{el?.estates?.address}</span>

            <div className="bottomWrapper">
              <div className="bottomWrapper_left">
                <span className="reviewDeposit">
                  {el?.review?.transaction_type} {el?.review?.deposit} /{" "}
                  {el?.review?.monthly_payment}
                </span>
                <span className="residenceType">
                  {el?.review?.residence_type}
                </span>
              </div>
              <div className="reviewStar">
                <img src={Star} alt="Star" />
                <span>{el?.review?.star}</span>
                <span className="reveiwTotalScore"> / 5.0</span>
              </div>
            </div>
          </StReviewWrap>
        );
      })}
    </>
  );
}, [data]);
```

- ë©”ëª¨ì´ì œì´ì…˜ ëœ ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒìœ¼ë¡œ componentëŠ” stateê°’ì´ ë³€ê²½ ë  ë•Œë§ˆë‹¤ ë¦¬ëœë”ë§ì´ ì´ë£¨ì–´ì§€ëŠ”ë° <br>
  ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê°’ì„ ì¬ ì„¤ì •í•˜ëŠ” ê²ƒì„ ë¶ˆí•„ìš” í•  ë•Œ ì‚¬ìš©

## useCallback

```javascript
const memoizedCallback = useCallback(í•¨ìˆ˜, ë°°ì—´);
// ì²«ë²ˆ ì§¸ ì¸ìë¡œ ë„˜ì–´ì˜¨ í•¨ìˆ˜ë¥¼, ë‘ë²ˆ ì§¸ ì¸ìë¡œ ë„˜ì–´ì˜¨ ë°°ì—´ ë‚´ì˜ ê°’ì´ ë³€ê²½ë  ë•Œê¹Œì§€ ì €ì¥í•´ë†“ê³  ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ
```

- íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
- ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ ë¦¬ëœë”ë§ì„ ë§‰ê¸° ìœ„í•´ì„œ ì‚¬ìš©(React.memo ì™€ë„ ê°™ì´ ì‚¬ìš©)
- ëœë”ë§ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µë˜ëŠ” í›…

```javascript
const throttledRefetch = useCallback(
  debounce(() => {
    refetch();
  }, 200),
  []
);
//useCallbackìœ¼ë¡œ ë””ë°”ìš´ìŠ¤ í•¨ìˆ˜ì˜ ì¬ìƒì„±ì„ ë§‰ì•„ì•¼í•œë‹¤
//textë¥¼ ì¹ ë•Œë§ˆë‹¤ stateê°’ì´ ë°”ë€Œë©´ì„œ, ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ì„ ìœ ë°œí•˜ëŠ”ë°,
//ë¦¬ë Œë”ë§ ë ë•Œë§ˆë‹¤ _debounceí•¨ìˆ˜ê°€ ì¬ìƒì„± ë˜ê¸° ë•Œë¬¸
```

## useCallbackì™€ React.memo ê°™ì´ ì‚¬ìš©í•˜ê¸°

- ë°©ì´ë¦„(room), ì¡°ëª… ì¼œì§ ì—¬ë¶€(on), ì¡°ëª… ì œì–´ í•¨ìˆ˜(toggle)ë¥¼ propìœ¼ë¡œ Lightì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±

```javascript
import React from "react";

const Light = React.memo(({ room, on, toggle }) => {
  console.log({ room, on });
  return (
    <button onClick={toggle}>
      {room} {on ? "ğŸ’¡" : "â¬›"}
    </button>
  );
});
//ê°ì‹¸ì£¼ê²Œ ëœë‹¤ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ëŠ” propsê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ ë‹¤ì‹œ í˜¸ì¶œ ë˜ì§€ ì•ŠìŒ
```

```javascript
import React, { useState, useCallback } from "react";

const SmartHome = () => {
  const [masterOn, setMasterOn] = useState(false);
  const [kitchenOn, setKitchenOn] = useState(false);
  const [bathOn, setBathOn] = useState(false);

  const toggleMaster = () => setMasterOn(!masterOn);
  const toggleKitchen = () => setKitchenOn(!kitchenOn);
  const toggleBath = () => setBathOn(!bathOn);
  return (
    <>
      <Light room="ì¹¨ì‹¤" on={masterOn} toggle={toggleMaster} />
      <Light room="ì£¼ë°©" on={kitchenOn} toggle={toggleKitchen} />
      <Light room="ìš•ì‹¤" on={bathOn} toggle={toggleBath} />
    </>
  );
};
// ìƒíƒœì—ì„œ ì¹¨ì‹¤ì˜ ì¡°ëª…ë§Œ ì¼°ì„ ê²½ìš° ì¹¨ì‹¤ë§Œ í‘œì‹œê°€ ë˜ì–´ì•¼ í•˜ì§€ë§Œ
{room: "ì¹¨ì‹¤", on: true}
{room: "ì£¼ë°©", on: false}
{room: "ìš•ì‹¤", on: false}
// ì´ë ‡ê²Œ ì½˜ì†”ì°½ì— ì¶œë ¥ ë˜ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆìŒ
```

- ê·¸ ì´ìœ ëŠ” ì¡°ëª…ì„ ì œì–´í•  ë•Œ ì‚¬ìš©í–ˆë˜ toggleMaster,toggleKitchen,toggleBath í•¨ìˆ˜ì˜ ì°¸ì¡°ê°’ë“¤ì´ <br>
  SmartHome ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ë  ë•Œë§ˆë‹¤ ë°”ë€Œì–´ ë²„ë¦¬ê¸° ë•Œë¬¸

```javascript
import React, { useState, useCallback } from "react";

const SmartHome = () => {
  const [masterOn, setMasterOn] = useState(false);
  const [kitchenOn, setKitchenOn] = useState(false);
  const [bathOn, setBathOn] = useState(false);

  const toggleMaster = useCallback(() => setMasterOn(!masterOn), [masterOn]);
  const toggleKitchen = useCallback(
    () => setKitchenOn(!kitchenOn),
    [kitchenOn]
  );
  const toggleBath = useCallback(() => setBathOn(!bathOn), [bathOn]);

  return (
    <>
      <Light room="ì¹¨ì‹¤" on={masterOn} toggle={toggleMaster} />
      <Light room="ì£¼ë°©" on={kitchenOn} toggle={toggleKitchen} />
      <Light room="ìš•ì‹¤" on={bathOn} toggle={toggleBath} />
    </>
  );
};
```
